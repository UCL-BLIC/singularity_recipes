Bootstrap: docker
From: ubuntu:16.04

%runscript

	echo "Running the container.."

%post
	
	# install some stuff
	#------------------------
	apt -y update
	apt-get -y install curl wget unzip 
	apt-get clean
	

	# download and install miniconda3
	#---------------------------------
	curl -sSL -O https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh
	bash Miniconda3-latest-Linux-x86_64.sh -p /opt/miniconda3 -b
	rm -fr Miniconda3-latest-Linux-x86_64.sh
	export PATH=/opt/miniconda3/bin:$PATH
	conda update -n base conda
	conda config --add channels defaults
	conda config --add channels conda-forge
	conda config --add channels bioconda



	# install kallisto, R, and r-packages from Bioconda
	#-------------------------------------------------
	conda install -c conda-forge kallisto

	conda install -c bioconda r

	conda install -c bioconda r-caret
	conda install -c bioconda r-tximport
	conda install -c bioconda r-factoextra
	conda install -c bioconda r-rmarkdown

    
%environment
	export LC_ALL=C
	export PATH=/opt/miniconda3/bin:$PATH

